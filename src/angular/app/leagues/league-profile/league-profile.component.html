<template [ngIf]="league == null">
    <loading></loading>
</template>
<template [ngIf]="league != null">

 <!--   <div class="row league-profile">
        <div class="col s12 m12 l12">
            <league-summary [league]="league"></league-summary>
        </div>
    </div>-->


    <div class="row league-profile__details">

        <div class="col s4">
            <img src="{{league.imageUrl}}?size=200" class="league-profile__avatar" alt="{{league.name}}">
        </div>
        <div class="col s8">
            <div class="league-profile__name-wrapper">
                <span class="league-profile__name">{{league.name}}</span>
             </div>
            <div class="league-profile__description">{{league.description}}</div>

        </div>
      <!--
        <img src="{{league.imageUrl}}" class="league-profile__avatar" alt="{{league.name}}">
        <div class="primary">
            <span class="title">{{league.name}}</span>
            <p class="grey-text darken-3">{{league.description}}</p>
        </div>
        <div class="secondary" *ngIf="ranking > 0">
            <div class="badges-container">
                <span class="badge light-blue darken-4 white-text">{{ranking}}<small>{{rankingText()}}</small></span>
                <span class="badge grey darken-1 white-text"><small class="rating-points">{{ratingPoints()}}</small></span>
            </div>
            <a class="waves-effect waves-light btn green" *ngIf="displayPlayBtn" (click)="onPlayClicked()"><i class="material-icons center">play_arrow</i>Play</a>
        </div>-->
    </div>







    <div class="row league-profile__play">
        <div *ngIf="playerInLeague" class="center" (click)="onPlayClicked()">
            <a class="waves-effect waves-light btn green"><i class="material-icons left">play_arrow</i>Play Game</a>
        </div>
    </div>

    <div class="row league-profile" *ngIf="adminInLeague || (authService.isAuthenticated() && !playerInLeague)">

        <div *ngIf="authService.isAuthenticated() && !playerInLeague" class="col s12" (click)="onJoinClicked()">
            <a class="waves-effect waves-light btn green"><i class="material-icons left">person_add</i>Join</a>
        </div>
        <div *ngIf="adminInLeague" class="col s12 m4" (click)="onEditClicked()">
            <a class="waves-effect waves-light btn light-blue darken-3"><i class="material-icons left">mode_edit</i>Edit</a>
        </div>
        <div *ngIf="adminInLeague" class="col s12 m4" (click)="onAddPlayerClicked()">
            <a class="waves-effect waves-light btn light-blue darken-3"><i class="material-icons left">add</i>Add player</a>
        </div>
    </div>

    <div class="row">
        <div class="col s12">
            <ul class="row list">
                <li class="col s12">
                    <league-player-list title="Top players" displayPlayers="true"
                                        [leaguePlayers]="league.leaguePlayers"
                                        [detailsPath]="['leagues', league.name.toLowerCase(), 'players']"
                                        [seeMoreText]="'See full player ranking…'"></league-player-list>
                </li>
                <li class="col s12">
                    <league-team-list title="Top teams" displayTeams="true"
                                      [leagueTeams]="league.leagueTeams"
                                      [detailsPath]="['leagues', league.name.toLowerCase(), 'teams']"
                                      [seeMoreText]="'See full team ranking…'"></league-team-list>
                </li>
                <!--<li class="col s12 m6 l12">-->
                <!--<div class="card">-->
                <!--<div class="card-content">-->
                <!--<p>League rules.</p>-->
                <!--</div>-->
                <!--</div>-->
                <!--</li>-->

            </ul>
        </div>

    </div>

    <div class="row">
        <div class="col s12">
            <template [ngIf]="activeGames.length > 0">
                <game-list [title]="'Active games'"
                           [games]="activeGames"></game-list>
            </template>

        </div>
    </div>

    <div class="row">
        <game-list [title]="'Latest games'"
                   [games]="league.games"></game-list>
    </div>


    <div class="modal center player-select-modal" materialize="modal"
         [materializeParams]="[{dismissible: true, inDuration: 100, outDuration: 100}]" [materializeActions]="materializeActions">
        <div class="modal-content">
            <h4 class="center">Select a player</h4>
            <player-select [playerIds]="nonMembersPlayerIds" (playerSelected)="onSelected($event)"></player-select>
        </div>
    </div>
</template>

